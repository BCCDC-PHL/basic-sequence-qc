params {
  profile = false
  cache = ''
  illumina_suffixes = ['*_R{1,2}_001', '*_R{1,2}', '*_{1,2}' ]
  fastq_exts = ['.fastq.gz', '.fq.gz']
  fastq_search_path = makeFastqSearchPath( params.illumina_suffixes, params.fastq_exts )
  kraken2_db = '/data/ref_databases/kraken2/2021-05-17_standard'
  bracken_db = "/data/ref_databases/kraken2/2021-05-17_standard"
  read_length = 150
  seqtk_fqchk_threshold = 30
  mash_sketch_kmer_size = 21
  mash_sketch_minimum_copies = 5
  prefix = ''
}

profiles {
  conda {
    process.conda = "$baseDir/environments/environment.yml"
    if (params.cache){
     conda.cacheDir = params.cache
    }
  }
}

process {
  withName: kraken2 { 
    cpus = 8 
  }
}

def makeFastqSearchPath ( illumina_suffixes, fastq_exts ) {
    if ( params.fastq_input ) {
      def fastq_search_path = []
      for (suffix in illumina_suffixes){
          for (ext in fastq_exts){
              fastq_search_path.add(params.fastq_input.toString() + '/**' + suffix.toString() + ext.toString())
          }
      }
      return fastq_search_path
    }
}

manifest {
  author = 'Dan Fornika'
  description = 'Basic Sequence QC'
  mainScript = 'main.nf'
  nextflowVersion = '>=20.01.0'
  version = '0.1.0'
}

